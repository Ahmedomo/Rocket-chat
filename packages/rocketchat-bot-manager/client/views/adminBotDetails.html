<template name="adminBotDetails">
	<section class="page-container page-home page-static page-settings">
		{{#header sectionName=pageTitle buttons=true}}
    <div class="rc-header__section-button">
      <button class="rc-button rc-button--cancel change" disabled="{{not canChange}}"><span>{{_ "Convert_account"}}</span></button>
      <button class="rc-button rc-button--cancel delete" disabled="{{not canDelete}}"><span>{{_ "Delete_account"}}</span></button>
      <button class="rc-button rc-button--primary save" disabled="{{not isChanged}}"><span>{{_ "Save_changes"}}</span></button>
    </div>
		{{/header}}

		<div class="content background-transparent-dark">
			<a href="{{pathFor "admin-bots"}}"><i class="icon-angle-left"></i> {{_ "Back_to_bots"}}</a><br><br>
			{{#unless hasPermission}}
				<p>{{_ "You_are_not_authorized_to_view_this_page"}}</p>
			{{else}}
				<div class="rocket-form">
					<div class="section">
						<div class="section-title">
							<div class="section-title-text">{{_ "Bot_Details"}} - {{getName}}</div>
							<div class="section-title-right">
								<button class="button primary collapse"><span>{{_ "Collapse"}}</span></button>
							</div>
						</div>
						<div class="section-content">
              <div class="input-line double-col">
                <label>{{_ "Status"}}</label>
                <div>
                  {{#if isOnline}}
                    {{#if canPause}}
                      <button class="button primary resume" disabled="{{not isPaused}}"><span>{{_ "Resume"}}</span></button>
                      <button class="button primary pause danger" disabled="{{isPaused}}"><span>{{_ "Pause"}}</span></button>
                    {{else}}
                    <button class="button primary" disabled="true" style="background-color: #18b230"><span>{{_ "Online"}}</span></button>
                    {{/if}}
                  {{else}}
                    <button class="button primary danger" disabled="true" style="background-color: #bc2031"><span>{{_ "Offline"}}</span></button>
                  {{/if}}
                </div>
              </div>
              <!-- Commenting avatar change section to use it later when setAvatar methods are decoupled from the user that calls them
              <div class="input-line double-col">
                <label>{{_ "Profile_picture"}}</label>
                <div class="rc-select-avatar">
                  <div class="rc-select-avatar__preview">
                    {{> avatar username=getUsername}}
                  </div>
                  <div class="rc-select-avatar__list">
                    <div class="rc-select-avatar__list-item rc-tooltip js-select-avatar-initials" aria-label="{{_ "initials_avatar" }}">
                      {{> avatar username=getUsername }}
                    </div>
                    <div class="rc-select-avatar__list-item rc-tooltip js-select-avatar-upload" aria-label="{{_ "Upload_user_avatar" }}">
                      <label class="rc-select-avatar__upload-label avatar" for="upload-avatar">
                        {{> icon block="rc-select-avatar__upload-icon" icon="upload"}}
                      </label>
                      <input type="file" name="" value="" id="upload-avatar" style="display:none;" accept="image/x-png,image/gif,image/jpeg">
                    </div>
                    <div class="rc-select-avatar__list-item rc-tooltip js-select-avatar-url {{selectUrl}}"  aria-label="{{_ "Use_url_for_avatar" }}">
                      <label class="rc-select-avatar__upload-label avatar">
                        {{> icon block="rc-select-avatar__upload-icon" icon="permalink"}}
                      </label>
                    </div>
                    <div class="rc-input">
                      <label class="rc-input__label">
                        <div class="rc-input__title">{{_ "Use_url_for_avatar"}}</div>
                        <div class="rc-input__wrapper">
                          <input name="avatar_url" class="rc-input__element js-avatar-url-input" placeholder="{{_ "Use_url_for_avatar"}}">
                        </div>
                      </label>
                    </div>
                  </div>
                </div>
              </div>
            -->
              <div class="input-line double-col">
                <label>{{_ "Account_name"}}</label>
                <div>
                  <input type="text" class="rc-input__element" name="name" value="{{getName}}" />
                  <div class="settings-description">{{_ "Bot_name_description"}}</div>
                </div>
              </div>
              <div class="input-line double-col">
                <label>{{_ "Account_username"}}</label>
                <div>
                  <input type="text" class="rc-input__element" name="username" value="{{getUsername}}" />
                  <div class="settings-description">{{_ "Bot_username_description"}}</div>
                </div>
              </div>
              <div class="input-line double-col">
                <label>{{_ "Account_password"}}</label>
                <div>
                  <input name="password" class="rc-input__element" type="password" autocomplete="off" value=""/>
                  <div class="settings-description">{{_ "Bot_password_description"}}</div>
                </div>
              </div>
              <div class="input-line double-col">
                <label>{{_ "Bot_framework"}}</label>
                <div>
                  <input type="text" class="rc-input__element" disabled="true" name="framework" value="{{getFramework}}" />
                  <div class="settings-description">{{_ "Bot_framework_description"}}</div>
                </div>
              </div>
              {{#if isOnline}}
                <div class="input-line double-col">
                  <label>{{_ "Connection_Status"}}</label>
                  <div>
                    <div class="settings-description">
                      {{_ "IP_Address"}}: {{ipAddress}}
                      <span class="rc-tooltip" aria-label="{{_ "Bot_IP_Address_description"}}">{{> icon block="rc-input__icon-svg" icon="info-circled" }}</span>
                    </div>
                    {{#if canPing}}
                      <div class="settings-description">
                        {{_ "Ping"}}: {{ping}}
                        <span class="rc-tooltip" aria-label="{{_ "Bot_Ping_description"}}">{{> icon block="rc-input__icon-svg" icon="info-circled" }}</span>
                      </div>
                    {{/if}}
                  </div>
                </div>
                <div class="input-line double-col">
                  <label>{{_ "Uptime"}}</label>
                  <div>
                    <div class="settings-description">
                      {{_ "Connected"}}: {{connectedUptime}}
                      <span class="rc-tooltip" aria-label="{{_ "Bot_Connected_Uptime_description"}}">{{> icon block="rc-input__icon-svg" icon="info-circled" }}</span>
                    </div>
                    {{#if canPause}}
                      <div class="settings-description">
                        {{_ "Active"}}: {{activeUptime}}
                        <span class="rc-tooltip" aria-label="{{_ "Bot_Active_Uptime_description"}}">{{> icon block="rc-input__icon-svg" icon="info-circled" }}</span>
                      </div>
                    {{/if}}
                  </div>
                </div>
              {{/if}}
              <div class="input-line double-col">
                <label>{{_ "Roles"}}</label>
                <div>
                  <ul id="roles" class="chip-container current-user-roles">
                    {{#each getRoles}}
                    <li class="remove-role" title="{{this}}"><i class="icon icon-cancel-circled"></i>{{this}}</li>
                    {{/each}}
                  </ul>
                  <div class="settings-description">{{_ "Bot_roles"}}</div>
                </div>
              </div>
              <div class="input-line double-col">
                <label>{{_ "Add_Role"}}</label>
                <div>
                  <select id="roleSelect" class="rc-input rc-form-item-inline rc-input--small" {{disabled availableRoles}}>
                    <option value="placeholder" disabled selected>{{_ "Select_role"}}</option>
                    {{#each availableRoles}}
                    <option value="{{_id}}">{{roleName}}</option>
                    {{/each}}
                  </select>
                  <button id="addRole" class="rc-button rc-button--primary rc-form-item-inline" {{disabled availableRoles}}>{{_ 'Add_Role'}}</button>
                </div>
              </div>
						</div>
					</div>
          <div class="section section-collapsed">
            <div class="section-title">
              <div class="section-title-text">{{_ "Bot_Statistics"}}</div>
              <div class="section-title-right">
                <button class="button primary refresh"><span>{{_ "Refresh"}}</span></button>
                <button class="button primary expand"><span>{{_ "Expand"}}</span></button>
              </div>
            </div>
            <div class="section-content">
              <h3>{{_ "Usage"}}</h3>
              <table class="statistics-table secondary-background-color">
                <tr class="admin-table-row">
                  <th class="content-background-color border-component-color">
                    <span class="rc-tooltip" aria-label="{{_ "Bot_Stats_Total_Messages_description"}}">{{> icon block="rc-input__icon-svg" icon="info-circled" }}</span>
                    {{_ "Stats_Total_Messages"}}
                  </th>
                  <td class="border-component-color">{{statistics.totalMessages}}</td>
                </tr>
                <tr class="admin-table-row">
                  <th class="content-background-color border-component-color">
                    <span class="rc-tooltip" aria-label="{{_ "Bot_Stats_Mention_Count_description"}}">{{> icon block="rc-input__icon-svg" icon="info-circled" }}</span>
                    {{_ "Bot_Stats_Mention_Count"}}
                  </th>
                  <td class="border-component-color">{{statistics.mentionCount}}</td>
                </tr>
              </table>
              {{#if statistics.sdk}}
                <h3>
                  {{_ "Session"}}
                  <span style="text-transform: none" class="rc-tooltip" aria-label="{{_ "Bot_Stats_Session_description"}}">
                    {{> icon block="rc-input__icon-svg" icon="info-circled" }}
                  </span>
                </h3>
                <table class="statistics-table secondary-background-color">
                  {{#each keyval statistics.sdk}}
                  <tr class="admin-table-row">
                    <th class="content-background-color border-component-color">
                      <span class="rc-tooltip" aria-label="{{_ description}}">{{> icon block="rc-input__icon-svg" icon="info-circled" }}</span>
                      {{_ key}}
                    </th>
                    <td class="border-component-color">{{value}}</td>
                  </tr>
                  {{/each}}
                  {{#each keyval statistics.adapter}}
                    <tr class="admin-table-row">
                      <th class="content-background-color border-component-color">
                        <span class="rc-tooltip" aria-label="{{_ description}}">{{> icon block="rc-input__icon-svg" icon="info-circled" }}</span>
                        {{_ key}}
                      </th>
                      <td class="border-component-color">{{value}}</td>
                    </tr>
                  {{/each}}
                </table>
              {{/if}}
            </div>
          </div>
				</div>
			{{/unless}}
		</div>
	</section>
</template>
