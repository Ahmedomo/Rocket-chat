{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/home/weslley/Documents/projects/Rocket.Chat/app/lib/server/functions/attachMessage.ts","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","objectRestSpread","asyncGenerators","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"os.linux.x86_64"},"sourceFileName":"app/lib/server/functions/attachMessage.ts","filename":"/home/weslley/Documents/projects/Rocket.Chat/app/lib/server/functions/attachMessage.ts","inputSourceMap":{"version":3,"file":"app/lib/server/functions/attachMessage.ts","sourceRoot":"","sources":["app/lib/server/functions/attachMessage.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,gBAAgB,EAAE,MAAM,qCAAqC,CAAC;AACvE,OAAO,EAAE,eAAe,EAAE,MAAM,8CAA8C,CAAC;AAK/E,MAAM,CAAC,MAAM,aAAa,GAAG,UAC5B,OAAiB,EACjB,IAAW;IASX,MAAM,EACL,GAAG,EACH,CAAC,EAAE,EAAE,QAAQ,EAAE,EACf,EAAE,EACF,WAAW,EACX,GAAG,GACH,GAAG,OAAO,CAAC;IACZ,OAAO;QACN,IAAI,EAAE,GAAG;QACT,UAAU,EAAE,QAAQ;QACpB,UAAU,EAAE,gBAAgB,CAAC,QAAQ,CAAC;QACtC,wDAAwD;QACxD,YAAY,EAAE,GAAG,eAAe,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,QAAQ,GAAG,EAAE;QACxE,WAAW;QACX,EAAE;KACF,CAAC;AACH,CAAC,CAAC","sourcesContent":["import { getUserAvatarURL } from '../../../utils/lib/getUserAvatarURL';\nimport { roomCoordinator } from '../../../../server/lib/rooms/roomCoordinator';\nimport { IMessage } from '../../../../definition/IMessage';\nimport { IRoom } from '../../../../definition/IRoom';\nimport { MessageAttachment } from '../../../../definition/IMessage/MessageAttachment/MessageAttachment';\n\nexport const attachMessage = function (\n\tmessage: IMessage,\n\troom: IRoom,\n): {\n\ttext: string;\n\tauthorName?: string;\n\tauthorIcon: string;\n\tmessage_link: string;\n\tattachments?: MessageAttachment[];\n\tts: Date;\n} {\n\tconst {\n\t\tmsg,\n\t\tu: { username },\n\t\tts,\n\t\tattachments,\n\t\t_id,\n\t} = message;\n\treturn {\n\t\ttext: msg,\n\t\tauthorName: username,\n\t\tauthorIcon: getUserAvatarURL(username),\n\t\t// eslint-disable-next-line @typescript-eslint/camelcase\n\t\tmessage_link: `${roomCoordinator.getRouteLink(room.t, room)}?msg=${_id}`,\n\t\tattachments,\n\t\tts,\n\t};\n};\n"]},"targets":{"android":"95.0.0","chrome":"95.0.0","edge":"95.0.0","firefox":"78.0.0","ie":"10.0.0","ios":"15.0.0","opera":"81.0.0","safari":"15.1.0","samsung":"14.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/home/weslley/Documents/projects/Rocket.Chat","root":"/home/weslley/Documents/projects/Rocket.Chat","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true}},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":{},"_verified":{},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.16.5","helpers":true,"useESModules":false,"corejs":false}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-meteor-async-await","visitor":{"AwaitExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]},"ClassPrivateMethod":{"exit":[null]}},"options":{"useNativeAsyncAwait":false}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-nullish-coalescing-operator","visitor":{"_exploded":{},"_verified":{},"LogicalExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-chaining","visitor":{"_exploded":true,"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_verified":true},"options":{}},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-catch-binding","visitor":{"_exploded":{},"_verified":{},"CatchClause":{"enter":[null]}},"options":{}},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"proposal-logical-assignment-operators","visitor":{"_exploded":{},"_verified":{},"AssignmentExpression":{"enter":[null]}},"options":{}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}}],"presets":[],"generatorOpts":{"filename":"/home/weslley/Documents/projects/Rocket.Chat/app/lib/server/functions/attachMessage.ts","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"app/lib/server/functions/attachMessage.ts"}},"code":"module.export({\n  attachMessage: () => attachMessage\n});\nlet getUserAvatarURL;\nmodule.link(\"../../../utils/lib/getUserAvatarURL\", {\n  getUserAvatarURL(v) {\n    getUserAvatarURL = v;\n  }\n\n}, 0);\nlet roomCoordinator;\nmodule.link(\"../../../../server/lib/rooms/roomCoordinator\", {\n  roomCoordinator(v) {\n    roomCoordinator = v;\n  }\n\n}, 1);\n\nconst attachMessage = function (message, room) {\n  const {\n    msg,\n    u: {\n      username\n    },\n    ts,\n    attachments,\n    _id\n  } = message;\n  return {\n    text: msg,\n    authorName: username,\n    authorIcon: getUserAvatarURL(username),\n    // eslint-disable-next-line @typescript-eslint/camelcase\n    message_link: \"\".concat(roomCoordinator.getRouteLink(room.t, room), \"?msg=\").concat(_id),\n    attachments,\n    ts\n  };\n};","map":{"version":3,"sources":["app/lib/server/functions/attachMessage.ts"],"names":[],"mappings":"AAAA,MAAA,CAAO,MAAP,CAAS;AAAA,EAAA,aAAkB,EAAA,MAAM;AAAxB,CAAT;AAAiC,IAAA,gBAAA;AAAqC,MAAC,CAAA,IAAD,CAAC,qCAAD,EAAC;AAAA,EAAA,gBAAA,CAAA,CAAA,EAAA;AAAA,IAAA,gBAAA,GAAA,CAAA;AAAA;;AAAA,CAAD,EAAC,CAAD;AAAC,IAAA,eAAA;AAAA,MAAA,CAAA,IAAA,CAAA,8CAAA,EAAA;AAAA,EAAA,eAAA,CAAA,CAAA,EAAA;AAAA,IAAA,eAAA,GAAA,CAAA;AAAA;;AAAA,CAAA,EAAA,CAAA;;AAMhE,MAAM,aAAa,GAAG,UAC5B,OAD4B,EAE5B,IAF4B,EAEjB;AASX,QAAM;AACL,IAAA,GADK;AAEL,IAAA,CAAC,EAAE;AAAE,MAAA;AAAF,KAFE;AAGL,IAAA,EAHK;AAIL,IAAA,WAJK;AAKL,IAAA;AALK,MAMF,OANJ;AAOA,SAAO;AACN,IAAA,IAAI,EAAE,GADA;AAEN,IAAA,UAAU,EAAE,QAFN;AAGN,IAAA,UAAU,EAAE,gBAAgB,CAAC,QAAD,CAHtB;AAIN;AACA,IAAA,YAAY,YAAK,eAAe,CAAC,YAAhB,CAA6B,IAAI,CAAC,CAAlC,EAAqC,IAArC,CAAL,kBAAuD,GAAvD,CALN;AAMN,IAAA,WANM;AAON,IAAA;AAPM,GAAP;AASA,CA3BM","sourcesContent":["import { getUserAvatarURL } from '../../../utils/lib/getUserAvatarURL';\nimport { roomCoordinator } from '../../../../server/lib/rooms/roomCoordinator';\nimport { IMessage } from '../../../../definition/IMessage';\nimport { IRoom } from '../../../../definition/IRoom';\nimport { MessageAttachment } from '../../../../definition/IMessage/MessageAttachment/MessageAttachment';\n\nexport const attachMessage = function (\n\tmessage: IMessage,\n\troom: IRoom,\n): {\n\ttext: string;\n\tauthorName?: string;\n\tauthorIcon: string;\n\tmessage_link: string;\n\tattachments?: MessageAttachment[];\n\tts: Date;\n} {\n\tconst {\n\t\tmsg,\n\t\tu: { username },\n\t\tts,\n\t\tattachments,\n\t\t_id,\n\t} = message;\n\treturn {\n\t\ttext: msg,\n\t\tauthorName: username,\n\t\tauthorIcon: getUserAvatarURL(username),\n\t\t// eslint-disable-next-line @typescript-eslint/camelcase\n\t\tmessage_link: `${roomCoordinator.getRouteLink(room.t, room)}?msg=${_id}`,\n\t\tattachments,\n\t\tts,\n\t};\n};\n"],"sourceRoot":""},"sourceType":"module","hash":"666ecca01bff10b9960a78eedfecf0c4ba6a0952"}
